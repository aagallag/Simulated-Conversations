{% extends "Student_Base.html" %}

{% load staticfiles %}

{# for recorder functions #}
{% load recorder_tags %}

{% block title %}Student Conversation Simulator{% endblock %}

{% block extrahead %}
{% getRecorderHead %}
{# NOTE:  the above includes the required ajax code #}
<script>
function gotoNext(){
   $("#modePane").load("{% url 'StudentConvoStep' %}");
}

function nextVideo(){  
   if (typeof $("#typedResponse").val() === 'undefined' || $("#typedResponse").val().length == 0){ // no response entered
       var choice = $("input[type='radio']:checked").val();
       var data = { choice: choice  };
       var args = { type:"POST", url:"{% url 'PostChoice' %}", data:data, cache:false, complete:function(){
                       gotoNext();
                   } };
       $.ajax(args);
   } else {
       var data = { typedResponse: $("#typedResponse").val() };
       var args = { type:"POST", url:"{% url 'PostTypedResponse' %}", data:data, cache:false, complete:function(){
                      $("#modePane").load("{% url 'Submit' %}");
                   } };
       $.ajax(args);      
   }
}
</script>
{% load_getUserMedia "makeRecording" %} 
{% endblock %}

{% block content %}
<div id="modePane"> {# this holds the current pane, either a video or text response #}
{% include 'Conversation_Video.html' %}
</div>
	
{% endblock %}
