{% extends "Student_Base.html" %}

{% load staticfiles %}

{# for recorder functions #}
{% load recorder_tags %}

{% block title %}<title>Student Video Response</title>{% endblock %}

{% block extrahead %}
{% getRecorderHead %}
<script>
function gotoNext(){
           var fd = new FormData();  // needed to wrap the blob
           fd.append('data', window.savedAudio);
           //var data = { recording:blob };
           var args = { type:"POST", url:"/studentconvostep/", data:fd, processData: false, contentType: false, cache:false, complete:function(){
                           window.location.replace("text_response");
                       } };
           $.ajax(args);
    }
</script>

{% endblock %}

{% block content %}
        <div class="alert alert-success">Here's how to use this page.... blah blah blah.</div>
        <h3>Video Page</h3>
	    {% if playback == True %}
          <p><iframe title="YouTube video player" class="youtube-player" type="text/html" 
              width="640" height="390" src="http://www.youtube.com/embed/{{vidLink}}"
              frameborder="0" allowFullScreen></iframe></p>
        {% else %}
          <p><iframe title="YouTube video player" class="youtube-player" type="text/html" 
              width="640" height="390" src="http://www.youtube.com/embed/{{vidLink}}" showsearch=0 rel = 0
              frameborder="0" allowFullScreen></iframe></p>
        {% endif %}
        <div class="well well-sm">{{text|safe}}</div>


		<!--form name="input" action="/studentconvostep/" method="post">{%csrf_token%}
		  <input type="submit" class="btn btn-default" value="Record Audio">
		</form-->
        {% load_getUserMedia "makeRecording" %}
        {% defaultHandler "makeRecording" %}  
        <button onclick="gotoNext();" >next</button>
{% endblock %}
